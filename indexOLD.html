<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plantilla de Clase</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }

        .slide {
            margin-bottom: 30px;
            padding: 15px;
            background-color: #f9f9f9;
            border-left: 4px solid #4285f4;
        }

        .slide-title {
            font-weight: bold;
            color: #4285f4;
            margin-bottom: 10px;
            font-size: 18px;
        }

        h1 {
            color: #4285f4;
            text-align: center;
        }

        .control-panel {
            background-color: #f1f1f1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 10px;
            border: 1px solid #ddd;
            font-family: monospace;
            font-size: 14px;
        }

        button {
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }

        button:hover {
            background-color: #3b78e7;
        }

        .marker {
            background-color: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h1>Plantilla de Clase</h1>

    <div class="control-panel">
        <h3>Coloca tu JSON aquí:</h3>
        <textarea id="jsonInput"></textarea>
        <button onclick="aplicarJSON()">Aplicar Reemplazos</button>
    </div>

    <div id="contenido-plantilla">
        <!-- El contenido de la plantilla se cargará aquí -->
    </div>

    <script>
        // Plantilla fija con marcadores
        const plantilla = [

            {
                titulo: "1. Bienvenida (3-5 minutos)",
                contenido: "Introducción al tema de la clase:\n{{INTRODUCCION_TEMA}}"
            },
            {
                titulo: "2. Repaso y Puntos Clave (5-7 minutos)",
                contenido: "Preguntas rápidas para activar conocimientos previos:\n{{PREGUNTA_ACTIVACION_1}}\n{{PREGUNTA_ACTIVACION_2}}\n\nIntroducción natural de las estructuras gramaticales a través de ejemplos:\n{{EJEMPLO_PERSONAL}}"
            },
            {
                titulo: "3. Lo que Veremos Hoy (2-3 minutos)",
                contenido: "Explicación breve de la estructura de la clase:\n{{ESTRUCTURA_CLASE}}"
            },
            {
                titulo: "4. La Historia de Hoy - TPRS (10 minutos)",
                contenido: "Narración de una historia breve y personalizada:\n{{HISTORIA_PRINCIPAL}}\n\nUso de preguntas circulares para involucrar al estudiante:\n{{PREGUNTA_CIRCULAR_1}}\n{{PREGUNTA_CIRCULAR_2}}\n{{PREGUNTA_CIRCULAR_3}}"
            },
            {
                titulo: "Práctica o Juego de Rol (5 minutos)",
                contenido: "Actividad interactiva:\n{{ACTIVIDAD_INTERACTIVA_1}}\n{{ACTIVIDAD_INTERACTIVA_2}}"
            },
            {
                titulo: "5. Lectura Corta (10 minutos)",
                contenido: "Lectura breve sobre el tema:\n{{TEXTO_LECTURA}}"
            },
            {
                titulo: "Preguntas de Comprensión (5 minutos)",
                contenido: "{{PREGUNTA_COMPRENSION_1}}\n{{PREGUNTA_COMPRENSION_2}}"
            },
            {
                titulo: "Preguntas Personalizadas (5 minutos)",
                contenido: "{{PREGUNTA_PERSONALIZADA_1}}\n{{PREGUNTA_PERSONALIZADA_2}}"
            },
            {
                titulo: "6. Resumen de la Sesión (3-5 minutos)",
                contenido: "Recapitulación rápida:\n{{RECAPITULACION}}\n\nRetroalimentación positiva:\n{{RETROALIMENTACION}}\n\nEspacio para preguntas finales:\n{{PREGUNTAS_FINALES}}"
            },
            {
                titulo: "7. Tarea y Ejercicios (2-3 minutos)",
                contenido: "Tarea personalizada:\n{{TAREA}}\n\nDespedida motivadora:\n{{DESPEDIDA}}"
            }
        ];

        // Función para resaltar marcadores
        function resaltarMarcadores(texto) {
            return texto.replace(/{{([^}]+)}}/g, '<span class="marker">{{$1}}</span>');
        }

        // Función para cargar la plantilla inicial
        function cargarPlantilla() {
            const container = document.getElementById('contenido-plantilla');
            container.innerHTML = '';

            // Para cada diapositiva en la plantilla
            plantilla.forEach((slide) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = 'slide';
                slideDiv.id = 'slide-' + slide.titulo.replace(/[^a-zA-Z0-9]/g, '-');

                const titleDiv = document.createElement('div');
                titleDiv.className = 'slide-title';
                titleDiv.innerHTML = resaltarMarcadores(slide.titulo);

                const contentDiv = document.createElement('div');
                contentDiv.className = 'slide-content';
                contentDiv.innerHTML = resaltarMarcadores(slide.contenido).replace(/\n/g, '<br>');

                slideDiv.appendChild(titleDiv);
                slideDiv.appendChild(contentDiv);
                container.appendChild(slideDiv);
            });
        }

        // Función para aplicar el JSON a la plantilla
        function aplicarJSON() {
            try {
                // Obtener y validar el JSON
                const jsonText = document.getElementById('jsonInput').value;
                if (!jsonText.trim()) {
                    alert('Por favor, ingresa el JSON para reemplazar los marcadores.');
                    return;
                }

                const jsonData = JSON.parse(jsonText);

                // Para cada diapositiva en la plantilla
                plantilla.forEach((slide) => {
                    const slideId = 'slide-' + slide.titulo.replace(/[^a-zA-Z0-9]/g, '-');
                    const slideDiv = document.getElementById(slideId);

                    if (slideDiv) {
                        const titleDiv = slideDiv.querySelector('.slide-title');
                        const contentDiv = slideDiv.querySelector('.slide-content');

                        // Aplicar reemplazos al título
                        let tituloConReemplazos = slide.titulo;
                        for (const [marcador, valor] of Object.entries(jsonData)) {
                            const regex = new RegExp(marcador.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                            tituloConReemplazos = tituloConReemplazos.replace(regex, valor);
                        }
                        titleDiv.innerHTML = tituloConReemplazos;

                        // Aplicar reemplazos al contenido
                        let contenidoConReemplazos = slide.contenido;
                        for (const [marcador, valor] of Object.entries(jsonData)) {
                            const regex = new RegExp(marcador.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                            contenidoConReemplazos = contenidoConReemplazos.replace(regex, valor);
                        }
                        contentDiv.innerHTML = contenidoConReemplazos.replace(/\n/g, '<br>');
                    }
                });

                alert('¡Reemplazos aplicados correctamente!');
            } catch (error) {
                alert('Error al procesar el JSON: ' + error.message);
            }
        }

        // Introducir un JSON de ejemplo al cargar la página
        window.onload = function () {
            // Cargar la plantilla con marcadores resaltados
            cargarPlantilla();

            // Cargar JSON de ejemplo
            document.getElementById('jsonInput').value = `{
  "{{TEMA_CLASE}}": "Hablar de Experiencias de Aprendizaje",
  "{{INTRODUCCION_TEMA}}": "Hoy vamos a hablar de experiencias de aprendizaje, cosas que empezaste a hacer, dejaste de hacer o volviste a intentar.",
  "{{PREGUNTA_ACTIVACION_1}}": "¿Recuerdas alguna actividad que empezaste a hacer hace tiempo? Por ejemplo, tocar un instrumento o aprender un idioma.",
  "{{PREGUNTA_ACTIVACION_2}}": "¿Hay algo que dejaste de hacer pero te gustaría volver a intentar?",
  "{{EJEMPLO_PERSONAL}}": "Yo, por ejemplo, empecé a aprender a cocinar durante la pandemia. Luego dejé de practicar, pero ahora quiero volver a intentarlo.",
  "{{ESTRUCTURA_CLASE}}": "Primero, vamos a hablar de tus experiencias. Luego, leeremos una historia corta sobre alguien que está aprendiendo algo nuevo. Finalmente, haremos un juego de roles.",
  "{{HISTORIA_PRINCIPAL}}": "María empezó a aprender a bailar salsa hace un mes. Al principio le costó mucho, pero no dejó de practicar. Hace una semana, volvió a tomar clases porque quiere mejorar.",
  "{{PREGUNTA_CIRCULAR_1}}": "¿Crees que a María le gusta bailar salsa?",
  "{{PREGUNTA_CIRCULAR_2}}": "¿Tú empezaste a aprender algo como María?",
  "{{PREGUNTA_CIRCULAR_3}}": "¿Qué harías tú si algo te cuesta mucho aprender?",
  "{{ACTIVIDAD_INTERACTIVA_1}}": "Ahora, imagina que tú eres María. ¿Qué me dirías sobre tu experiencia aprendiendo a bailar salsa?",
  "{{ACTIVIDAD_INTERACTIVA_2}}": "Si el estudiante se anima, puede inventar una historia similar sobre sí mismo o alguien más.",
  "{{TEXTO_LECTURA}}": "Juan dejó de estudiar inglés hace dos años porque no tenía tiempo. Ahora quiere volver a aprender porque necesita el idioma para su trabajo. Empezó a tomar clases en línea y está muy motivado.",
  "{{PREGUNTA_COMPRENSION_1}}": "¿Por qué Juan dejó de estudiar inglés?",
  "{{PREGUNTA_COMPRENSION_2}}": "¿Qué está haciendo ahora para aprender?",
  "{{PREGUNTA_PERSONALIZADA_1}}": "¿Tú has dejado de aprender algo y luego volviste a intentarlo?",
  "{{PREGUNTA_PERSONALIZADA_2}}": "¿Qué cosas te gustaría empezar a aprender en el futuro?",
  "{{RECAPITULACION}}": "Hoy hablamos de experiencias de aprendizaje. Vimos cómo María empezó a bailar salsa y cómo Juan volvió a estudiar inglés. ¿Qué aprendiste hoy?",
  "{{RETROALIMENTACION}}": "Me encantó cómo usaste las frases 'empecé a' y 'dejé de'. ¡Muy bien!",
  "{{PREGUNTAS_FINALES}}": "¿Tienes alguna duda o quieres repasar algo?",
  "{{TAREA}}": "Para la próxima clase, piensa en algo que empezaste a hacer, dejaste de hacer o quieres volver a intentar. Escribe unas frases cortas y lo compartimos la próxima vez.",
  "{{DESPEDIDA}}": "¡Gracias por tu esfuerzo hoy! Nos vemos en la próxima clase."
}`;
        };
    </script>
</body>

</html>