<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Clases</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .container {
            display: flex;
            gap: 20px;
        }

        .form-section {
            flex: 1;
            max-width: 500px;
        }

        .preview-section {
            flex: 1;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input,
        textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
        }

        textarea {
            height: 80px;
            resize: vertical;
        }

        button {
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #3b78e7;
        }

        .slide {
            margin-bottom: 30px;
            padding: 15px;
            background-color: #f9f9f9;
            border-left: 4px solid #4285f4;
        }

        .slide-title {
            font-weight: bold;
            color: #4285f4;
            margin-bottom: 10px;
            font-size: 18px;
        }

        h1,
        h2 {
            color: #4285f4;
        }

        .marker {
            background-color: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .section-title {
            background-color: #f1f1f1;
            padding: 10px;
            margin-top: 30px;
            border-radius: 4px;
            font-weight: bold;
        }

        .collapse-btn {
            background-color: transparent;
            color: #4285f4;
            text-decoration: underline;
            border: none;
            padding: 0;
            cursor: pointer;
            font-size: 14px;
            margin-left: 10px;
        }

        .collapse-btn:hover {
            color: #3b78e7;
            background-color: transparent;
        }

        .hidden {
            display: none;
        }

        .actions {
            position: sticky;
            bottom: 0;
            background-color: white;
            padding: 15px 0;
            border-top: 1px solid #ddd;
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>

<body>
    <h1>Generador de Clases</h1>

    <div class="container">
        <div class="form-section">
            <h2>Completa los datos de la clase</h2>

            <form id="classForm">
                <div class="form-group">
                    <label for="tema_clase">Tema de la Clase:</label>
                    <input type="text" id="tema_clase" name="tema_clase" required>
                </div>

                <div class="section-title">
                    1. Bienvenida
                    <button type="button" class="collapse-btn"
                        onclick="toggleSection('bienvenida')">Mostrar/Ocultar</button>
                </div>
                <div id="bienvenida">
                    <div class="form-group">
                        <label for="introduccion_tema">Introducción al tema:</label>
                        <textarea id="introduccion_tema" name="introduccion_tema"></textarea>
                    </div>
                </div>

                <div class="section-title">
                    2. Repaso y Puntos Clave
                    <button type="button" class="collapse-btn"
                        onclick="toggleSection('repaso')">Mostrar/Ocultar</button>
                </div>
                <div id="repaso">
                    <div class="form-group">
                        <label for="pregunta_activacion_1">Pregunta de activación 1:</label>
                        <input type="text" id="pregunta_activacion_1" name="pregunta_activacion_1">
                    </div>
                    <div class="form-group">
                        <label for="pregunta_activacion_2">Pregunta de activación 2:</label>
                        <input type="text" id="pregunta_activacion_2" name="pregunta_activacion_2">
                    </div>
                    <div class="form-group">
                        <label for="ejemplo_personal">Ejemplo personal:</label>
                        <textarea id="ejemplo_personal" name="ejemplo_personal"></textarea>
                    </div>
                </div>

                <div class="section-title">
                    3. Lo que Veremos Hoy
                    <button type="button" class="collapse-btn"
                        onclick="toggleSection('estructura')">Mostrar/Ocultar</button>
                </div>
                <div id="estructura">
                    <div class="form-group">
                        <label for="estructura_clase">Estructura de la clase:</label>
                        <textarea id="estructura_clase" name="estructura_clase"></textarea>
                    </div>
                </div>

                <div class="section-title">
                    4. La Historia de Hoy
                    <button type="button" class="collapse-btn"
                        onclick="toggleSection('historia')">Mostrar/Ocultar</button>
                </div>
                <div id="historia">
                    <div class="form-group">
                        <label for="historia_principal">Historia principal:</label>
                        <textarea id="historia_principal" name="historia_principal"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="pregunta_circular_1">Pregunta circular 1:</label>
                        <input type="text" id="pregunta_circular_1" name="pregunta_circular_1">
                    </div>
                    <div class="form-group">
                        <label for="pregunta_circular_2">Pregunta circular 2:</label>
                        <input type="text" id="pregunta_circular_2" name="pregunta_circular_2">
                    </div>
                    <div class="form-group">
                        <label for="pregunta_circular_3">Pregunta circular 3:</label>
                        <input type="text" id="pregunta_circular_3" name="pregunta_circular_3">
                    </div>
                    <div class="form-group">
                        <label for="actividad_interactiva_1">Actividad interactiva 1:</label>
                        <input type="text" id="actividad_interactiva_1" name="actividad_interactiva_1">
                    </div>
                    <div class="form-group">
                        <label for="actividad_interactiva_2">Actividad interactiva 2:</label>
                        <input type="text" id="actividad_interactiva_2" name="actividad_interactiva_2">
                    </div>
                </div>

                <div class="section-title">
                    5. Lectura Corta
                    <button type="button" class="collapse-btn"
                        onclick="toggleSection('lectura')">Mostrar/Ocultar</button>
                </div>
                <div id="lectura">
                    <div class="form-group">
                        <label for="texto_lectura">Texto de lectura:</label>
                        <textarea id="texto_lectura" name="texto_lectura"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="pregunta_comprension_1">Pregunta de comprensión 1:</label>
                        <input type="text" id="pregunta_comprension_1" name="pregunta_comprension_1">
                    </div>
                    <div class="form-group">
                        <label for="pregunta_comprension_2">Pregunta de comprensión 2:</label>
                        <input type="text" id="pregunta_comprension_2" name="pregunta_comprension_2">
                    </div>
                    <div class="form-group">
                        <label for="pregunta_personalizada_1">Pregunta personalizada 1:</label>
                        <input type="text" id="pregunta_personalizada_1" name="pregunta_personalizada_1">
                    </div>
                    <div class="form-group">
                        <label for="pregunta_personalizada_2">Pregunta personalizada 2:</label>
                        <input type="text" id="pregunta_personalizada_2" name="pregunta_personalizada_2">
                    </div>
                </div>

                <div class="section-title">
                    6. Resumen de la Sesión
                    <button type="button" class="collapse-btn"
                        onclick="toggleSection('resumen')">Mostrar/Ocultar</button>
                </div>
                <div id="resumen">
                    <div class="form-group">
                        <label for="recapitulacion">Recapitulación:</label>
                        <textarea id="recapitulacion" name="recapitulacion"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="retroalimentacion">Retroalimentación positiva:</label>
                        <input type="text" id="retroalimentacion" name="retroalimentacion">
                    </div>
                    <div class="form-group">
                        <label for="preguntas_finales">Preguntas finales:</label>
                        <input type="text" id="preguntas_finales" name="preguntas_finales">
                    </div>
                </div>

                <div class="section-title">
                    7. Tarea y Ejercicios
                    <button type="button" class="collapse-btn" onclick="toggleSection('tarea')">Mostrar/Ocultar</button>
                </div>
                <div id="tarea">
                    <div class="form-group">
                        <label for="tarea">Tarea personalizada:</label>
                        <textarea id="tarea" name="tarea"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="despedida">Despedida motivadora:</label>
                        <input type="text" id="despedida" name="despedida">
                    </div>
                </div>

                <div class="actions">
                    <button type="button" onclick="cargarEjemplo()">Cargar Ejemplo</button>
                    <button type="button" onclick="generarPlantilla()">Generar Plantilla</button>
                    <button type="button" onclick="exportarJSON()">Exportar JSON</button>
                </div>
            </form>
        </div>

        <div class="preview-section">
            <h2>Vista Previa</h2>
            <div id="contenido-plantilla">
                <!-- El contenido de la plantilla se cargará aquí -->
            </div>
        </div>
    </div>

    <!-- Modal para exportar JSON -->
    <div id="jsonModal"
        style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000;">
        <div
            style="background: white; width: 80%; max-width: 600px; margin: 100px auto; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.5);">
            <h3>JSON Generado</h3>
            <textarea id="jsonOutput" style="width: 100%; height: 300px; margin-bottom: 15px;"></textarea>
            <div style="text-align: right;">
                <button onclick="copiarJSON()">Copiar al Portapapeles</button>
                <button onclick="document.getElementById('jsonModal').style.display='none'">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
        // Plantilla fija con marcadores
        const plantilla = [
            {
                titulo: "Clase Online: {{TEMA_CLASE}}",
                contenido: ""
            },
            {
                titulo: "1. Bienvenida (3-5 minutos)",
                contenido: "Introducción al tema de la clase:\n{{INTRODUCCION_TEMA}}"
            },
            {
                titulo: "2. Repaso y Puntos Clave (5-7 minutos)",
                contenido: "Preguntas rápidas para activar conocimientos previos:\n{{PREGUNTA_ACTIVACION_1}}\n{{PREGUNTA_ACTIVACION_2}}\n\nIntroducción natural de las estructuras gramaticales a través de ejemplos:\n{{EJEMPLO_PERSONAL}}"
            },
            {
                titulo: "3. Lo que Veremos Hoy (2-3 minutos)",
                contenido: "Explicación breve de la estructura de la clase:\n{{ESTRUCTURA_CLASE}}"
            },
            {
                titulo: "4. La Historia de Hoy - TPRS (10 minutos)",
                contenido: "Narración de una historia breve y personalizada:\n{{HISTORIA_PRINCIPAL}}\n\nUso de preguntas circulares para involucrar al estudiante:\n{{PREGUNTA_CIRCULAR_1}}\n{{PREGUNTA_CIRCULAR_2}}\n{{PREGUNTA_CIRCULAR_3}}"
            },
            {
                titulo: "Práctica o Juego de Rol (5 minutos)",
                contenido: "Actividad interactiva:\n{{ACTIVIDAD_INTERACTIVA_1}}\n{{ACTIVIDAD_INTERACTIVA_2}}"
            },
            {
                titulo: "5. Lectura Corta (10 minutos)",
                contenido: "Lectura breve sobre el tema:\n{{TEXTO_LECTURA}}"
            },
            {
                titulo: "Preguntas de Comprensión (5 minutos)",
                contenido: "{{PREGUNTA_COMPRENSION_1}}\n{{PREGUNTA_COMPRENSION_2}}"
            },
            {
                titulo: "Preguntas Personalizadas (5 minutos)",
                contenido: "{{PREGUNTA_PERSONALIZADA_1}}\n{{PREGUNTA_PERSONALIZADA_2}}"
            },
            {
                titulo: "6. Resumen de la Sesión (3-5 minutos)",
                contenido: "Recapitulación rápida:\n{{RECAPITULACION}}\n\nRetroalimentación positiva:\n{{RETROALIMENTACION}}\n\nEspacio para preguntas finales:\n{{PREGUNTAS_FINALES}}"
            },
            {
                titulo: "7. Tarea y Ejercicios (2-3 minutos)",
                contenido: "Tarea personalizada:\n{{TAREA}}\n\nDespedida motivadora:\n{{DESPEDIDA}}"
            }
        ];

        // Función para resaltar marcadores
        function resaltarMarcadores(texto) {
            return texto.replace(/{{([^}]+)}}/g, '<span class="marker">{{$1}}</span>');
        }

        // Función para cargar la plantilla inicial
        function cargarPlantilla() {
            const container = document.getElementById('contenido-plantilla');
            container.innerHTML = '';

            // Para cada diapositiva en la plantilla
            plantilla.forEach((slide) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = 'slide';
                slideDiv.id = 'slide-' + slide.titulo.replace(/[^a-zA-Z0-9]/g, '-');

                const titleDiv = document.createElement('div');
                titleDiv.className = 'slide-title';
                titleDiv.innerHTML = resaltarMarcadores(slide.titulo);

                const contentDiv = document.createElement('div');
                contentDiv.className = 'slide-content';
                contentDiv.innerHTML = resaltarMarcadores(slide.contenido).replace(/\n/g, '<br>');

                slideDiv.appendChild(titleDiv);
                slideDiv.appendChild(contentDiv);
                container.appendChild(slideDiv);
            });
        }

        // Función para generar plantilla desde el formulario
        function generarPlantilla() {
            // Recopilar datos del formulario
            const formData = {
                "{{TEMA_CLASE}}": document.getElementById('tema_clase').value || "Título de la clase",
                "{{INTRODUCCION_TEMA}}": document.getElementById('introduccion_tema').value || "",
                "{{PREGUNTA_ACTIVACION_1}}": document.getElementById('pregunta_activacion_1').value || "",
                "{{PREGUNTA_ACTIVACION_2}}": document.getElementById('pregunta_activacion_2').value || "",
                "{{EJEMPLO_PERSONAL}}": document.getElementById('ejemplo_personal').value || "",
                "{{ESTRUCTURA_CLASE}}": document.getElementById('estructura_clase').value || "",
                "{{HISTORIA_PRINCIPAL}}": document.getElementById('historia_principal').value || "",
                "{{PREGUNTA_CIRCULAR_1}}": document.getElementById('pregunta_circular_1').value || "",
                "{{PREGUNTA_CIRCULAR_2}}": document.getElementById('pregunta_circular_2').value || "",
                "{{PREGUNTA_CIRCULAR_3}}": document.getElementById('pregunta_circular_3').value || "",
                "{{ACTIVIDAD_INTERACTIVA_1}}": document.getElementById('actividad_interactiva_1').value || "",
                "{{ACTIVIDAD_INTERACTIVA_2}}": document.getElementById('actividad_interactiva_2').value || "",
                "{{TEXTO_LECTURA}}": document.getElementById('texto_lectura').value || "",
                "{{PREGUNTA_COMPRENSION_1}}": document.getElementById('pregunta_comprension_1').value || "",
                "{{PREGUNTA_COMPRENSION_2}}": document.getElementById('pregunta_comprension_2').value || "",
                "{{PREGUNTA_PERSONALIZADA_1}}": document.getElementById('pregunta_personalizada_1').value || "",
                "{{PREGUNTA_PERSONALIZADA_2}}": document.getElementById('pregunta_personalizada_2').value || "",
                "{{RECAPITULACION}}": document.getElementById('recapitulacion').value || "",
                "{{RETROALIMENTACION}}": document.getElementById('retroalimentacion').value || "",
                "{{PREGUNTAS_FINALES}}": document.getElementById('preguntas_finales').value || "",
                "{{TAREA}}": document.getElementById('tarea').value || "",
                "{{DESPEDIDA}}": document.getElementById('despedida').value || ""
            };

            // Para cada diapositiva en la plantilla
            plantilla.forEach((slide) => {
                const slideId = 'slide-' + slide.titulo.replace(/[^a-zA-Z0-9]/g, '-');
                const slideDiv = document.getElementById(slideId);

                if (slideDiv) {
                    const titleDiv = slideDiv.querySelector('.slide-title');
                    const contentDiv = slideDiv.querySelector('.slide-content');

                    // Aplicar reemplazos al título
                    let tituloConReemplazos = slide.titulo;
                    for (const [marcador, valor] of Object.entries(formData)) {
                        const regex = new RegExp(marcador.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                        tituloConReemplazos = tituloConReemplazos.replace(regex, valor);
                    }
                    titleDiv.innerHTML = tituloConReemplazos;

                    // Aplicar reemplazos al contenido
                    let contenidoConReemplazos = slide.contenido;
                    for (const [marcador, valor] of Object.entries(formData)) {
                        const regex = new RegExp(marcador.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                        contenidoConReemplazos = contenidoConReemplazos.replace(regex, valor);
                    }
                    contentDiv.innerHTML = contenidoConReemplazos.replace(/\n/g, '<br>');
                }
            });

            // Desplazarse a la vista previa
            document.querySelector('.preview-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Función para exportar JSON
        function exportarJSON() {
            // Recopilar datos del formulario
            const formData = {
                "{{TEMA_CLASE}}": document.getElementById('tema_clase').value || "Título de la clase",
                "{{INTRODUCCION_TEMA}}": document.getElementById('introduccion_tema').value || "",
                "{{PREGUNTA_ACTIVACION_1}}": document.getElementById('pregunta_activacion_1').value || "",
                "{{PREGUNTA_ACTIVACION_2}}": document.getElementById('pregunta_activacion_2').value || "",
                "{{EJEMPLO_PERSONAL}}": document.getElementById('ejemplo_personal').value || "",
                "{{ESTRUCTURA_CLASE}}": document.getElementById('estructura_clase').value || "",
                "{{HISTORIA_PRINCIPAL}}": document.getElementById('historia_principal').value || "",
                "{{PREGUNTA_CIRCULAR_1}}": document.getElementById('pregunta_circular_1').value || "",
                "{{PREGUNTA_CIRCULAR_2}}": document.getElementById('pregunta_circular_2').value || "",
                "{{PREGUNTA_CIRCULAR_3}}": document.getElementById('pregunta_circular_3').value || "",
                "{{ACTIVIDAD_INTERACTIVA_1}}": document.getElementById('actividad_interactiva_1').value || "",
                "{{ACTIVIDAD_INTERACTIVA_2}}": document.getElementById('actividad_interactiva_2').value || "",
                "{{TEXTO_LECTURA}}": document.getElementById('texto_lectura').value || "",
                "{{PREGUNTA_COMPRENSION_1}}": document.getElementById('pregunta_comprension_1').value || "",
                "{{PREGUNTA_COMPRENSION_2}}": document.getElementById('pregunta_comprension_2').value || "",
                "{{PREGUNTA_PERSONALIZADA_1}}": document.getElementById('pregunta_personalizada_1').value || "",
                "{{PREGUNTA_PERSONALIZADA_2}}": document.getElementById('pregunta_personalizada_2').value || "",
                "{{RECAPITULACION}}": document.getElementById('recapitulacion').value || "",
                "{{RETROALIMENTACION}}": document.getElementById('retroalimentacion').value || "",
                "{{PREGUNTAS_FINALES}}": document.getElementById('preguntas_finales').value || "",
                "{{TAREA}}": document.getElementById('tarea').value || "",
                "{{DESPEDIDA}}": document.getElementById('despedida').value || ""
            };

            // Mostrar el JSON en el modal
            document.getElementById('jsonOutput').value = JSON.stringify(formData, null, 2);
            document.getElementById('jsonModal').style.display = 'block';
        }

        // Función para copiar JSON al portapapeles
        function copiarJSON() {
            const jsonOutput = document.getElementById('jsonOutput');
            jsonOutput.select();
            document.execCommand('copy');
            alert('JSON copiado al portapapeles');
        }

        // Función para mostrar/ocultar secciones del formulario
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.toggle('hidden');
        }

        // Función para cargar ejemplo
        function cargarEjemplo() {
            const ejemplo = {
                "tema_clase": "Hablar de Experiencias de Aprendizaje",
                "introduccion_tema": "Hoy vamos a hablar de experiencias de aprendizaje, cosas que empezaste a hacer, dejaste de hacer o volviste a intentar.",
                "pregunta_activacion_1": "¿Recuerdas alguna actividad que empezaste a hacer hace tiempo? Por ejemplo, tocar un instrumento o aprender un idioma.",
                "pregunta_activacion_2": "¿Hay algo que dejaste de hacer pero te gustaría volver a intentar?",
                "ejemplo_personal": "Yo, por ejemplo, empecé a aprender a cocinar durante la pandemia. Luego dejé de practicar, pero ahora quiero volver a intentarlo.",
                "estructura_clase": "Primero, vamos a hablar de tus experiencias. Luego, leeremos una historia corta sobre alguien que está aprendiendo algo nuevo. Finalmente, haremos un juego de roles.",
                "historia_principal": "María empezó a aprender a bailar salsa hace un mes. Al principio le costó mucho, pero no dejó de practicar. Hace una semana, volvió a tomar clases porque quiere mejorar.",
                "pregunta_circular_1": "¿Crees que a María le gusta bailar salsa?",
                "pregunta_circular_2": "¿Tú empezaste a aprender algo como María?",
                "pregunta_circular_3": "¿Qué harías tú si algo te cuesta mucho aprender?",
                "actividad_interactiva_1": "Ahora, imagina que tú eres María. ¿Qué me dirías sobre tu experiencia aprendiendo a bailar salsa?",
                "actividad_interactiva_2": "Si el estudiante se anima, puede inventar una historia similar sobre sí mismo o alguien más.",
                "texto_lectura": "Juan dejó de estudiar inglés hace dos años porque no tenía tiempo. Ahora quiere volver a aprender porque necesita el idioma para su trabajo. Empezó a tomar clases en línea y está muy motivado.",
                "pregunta_comprension_1": "¿Por qué Juan dejó de estudiar inglés?",
                "pregunta_comprension_2": "¿Qué está haciendo ahora para aprender?",
                "pregunta_personalizada_1": "¿Tú has dejado de aprender algo y luego volviste a intentarlo?",
                "pregunta_personalizada_2": "¿Qué cosas te gustaría empezar a aprender en el futuro?",
                "recapitulacion": "Hoy hablamos de experiencias de aprendizaje. Vimos cómo María empezó a bailar salsa y cómo Juan volvió a estudiar inglés. ¿Qué aprendiste hoy?",
                "retroalimentacion": "Me encantó cómo usaste las frases 'empecé a' y 'dejé de'. ¡Muy bien!",
                "preguntas_finales": "¿Tienes alguna duda o quieres repasar algo?",
                "tarea": "Para la próxima clase, piensa en algo que empezaste a hacer, dejaste de hacer o quieres volver a intentar. Escribe unas frases cortas y lo compartimos la próxima vez.",
                "despedida": "¡Gracias por tu esfuerzo hoy! Nos vemos en la próxima clase."
            };

            // Rellenar los campos del formulario
            for (const [id, valor] of Object.entries(ejemplo)) {
                if (document.getElementById(id)) {
                    document.getElementById(id).value = valor;
                }
            }

            // Generar la plantilla con los datos de ejemplo
            generarPlantilla();
        }

        // Inicializar la página
        window.onload = function () {
            cargarPlantilla();
        };
    </script>
</body>

</html>